(window.webpackChunkexamples=window.webpackChunkexamples||[]).push([[681],{83349:function(t,e,r){"use strict";t.exports=r(7551)},7551:function(t,e,r){"use strict";var n=r(25108),i=r(86587).Buffer;function a(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var s=a(r(28955)),o=a(r(90230)),u=a(r(92647)),c=a(r(91031)),h=a(r(95768)),p=r(94),f=r(41284);function d(t,e,r,n,i,a,s){try{var o=t[a](s),u=o.value}catch(t){return void r(t)}o.done?e(u):Promise.resolve(u).then(n,i)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function s(t){d(a,n,i,s,o,"next",t)}function o(t){d(a,n,i,s,o,"throw",t)}s(void 0)}))}}function g(){return(g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var v,m=(function(t){var e=function(t){var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function o(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=Object.create((e&&e.prototype instanceof p?e:p).prototype),a=new k(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var o=x(s,r);if(o){if(o===h)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h={};function p(){}function f(){}function d(){}var l={};l[i]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(E([])));v&&v!==e&&r.call(v,i)&&(l=v);var m=d.prototype=p.prototype=Object.create(l);function y(t){["next","throw","return"].forEach((function(e){o(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var n;this._invoke=function(i,a){function s(){return new e((function(n,s){!function n(i,a,s,o){var u=c(t[i],t,a);if("throw"!==u.type){var h=u.arg,p=h.value;return p&&"object"==typeof p&&r.call(p,"__await")?e.resolve(p.__await).then((function(t){n("next",t,s,o)}),(function(t){n("throw",t,s,o)})):e.resolve(p).then((function(t){h.value=t,s(h)}),(function(t){return n("throw",t,s,o)}))}o(u.arg)}(i,a,n,s)}))}return n=n?n.then(s,s):s()}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return f.prototype=m.constructor=d,d.constructor=f,f.displayName=o(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,o(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},y(w.prototype),w.prototype[a]=function(){return this},t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var s=new w(u(e,r,n,i),a);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},y(m),o(m,s,"Generator"),m[i]=function(){return this},m.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return s.type="throw",s.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var o=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(o&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}(v={exports:{}}),v.exports),y=function(){function t(){this.transport={},this.app={}}var e=t.prototype;return e.makeApp=function(){var t=l(m.mark((function t(){return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.create();case 3:this.transport=t.sent,this.app=new h(this.transport),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),n.log("LEDGER:::CREATE APP ERROR",t.t0),t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),e.cleanUp=function(){var t=l(m.mark((function t(){var e;return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.app={},t.prev=1,t.t0=null==(e=this.transport)?void 0:e.close,!t.t0){t.next=6;break}return t.next=6,this.transport.close();case 6:t.next=11;break;case 8:t.prev=8,t.t1=t.catch(1),n.warn(t.t1);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),e.unlock=function(){var t=l(m.mark((function t(e){return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.makeApp();case 3:return t.next=5,this.app.getAddress(e,!1,!0);case 5:return t.abrupt("return",t.sent);case 8:throw t.prev=8,t.t0=t.catch(0),new Error(this.ledgerErrToMessage(t.t0));case 11:return t.prev=11,t.next=14,this.cleanUp();case 14:return t.finish(11);case 15:case"end":return t.stop()}}),t,this,[[0,8,11,15]])})));return function(e){return t.apply(this,arguments)}}(),e.signTransaction=function(){var t=l(m.mark((function t(e,r){return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.makeApp();case 3:return t.next=5,this.app.signTransaction(e,r);case 5:return t.abrupt("return",t.sent);case 8:throw t.prev=8,t.t0=t.catch(0),new Error(this.ledgerErrToMessage(t.t0));case 11:return t.prev=11,t.next=14,this.cleanUp();case 14:return t.finish(11);case 15:case"end":return t.stop()}}),t,this,[[0,8,11,15]])})));return function(e,r){return t.apply(this,arguments)}}(),e.signPersonalMessage=function(){var t=l(m.mark((function t(e,r){return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.makeApp();case 3:return t.next=5,this.app.signPersonalMessage(e,r);case 5:return t.abrupt("return",t.sent);case 8:throw t.prev=8,t.t0=t.catch(0),new Error(this.ledgerErrToMessage(t.t0));case 11:return t.prev=11,t.next=14,this.cleanUp();case 14:return t.finish(11);case 15:case"end":return t.stop()}}),t,this,[[0,8,11,15]])})));return function(e,r){return t.apply(this,arguments)}}(),e.ledgerErrToMessage=function(t){var e,r;return e=t,"TransportWebUSBGestureRequired"===(r=String(e.name||e))||"TransportOpenUserCancelled"===r?"LEDGER_NEED_USB_PERMISSION":function(t){var e=String(t.message||t);return e.includes("0x6700")||e.includes("0x6e00")}(t)?"LEDGER_WRONG_APP":function(t){var e=String(t.message||t);return e.includes("OpenFailed")||e.includes("0x6804")}(t)||function(t){return"string"==typeof t}(t)&&t.includes("6801")?"LEDGER_LOCKED":function(t){return t.hasOwnProperty("id")&&t.hasOwnProperty("message")}(t)&&t.message.includes("U2F not supported")?"U2F_NOT_SUPPORTED":t.toString()},t}(),w=/chrome/i.test(window.navigator.userAgent),x=function(){function t(){this.bridgeUrl="https://binance-chain-npm.github.io/ledger-bridge/bsc/",this.iframe={},this._setupIframe()}var e=t.prototype;return e.getPublicKey=function(){var t=l(m.mark((function t(e){return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._sendMessage({action:"ledger-unlock",params:{hdPath:e}}));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.unlock=function(t){return this._sendMessage({action:"ledger-unlock",params:{hdPath:t}})},e.signTransaction=function(t,e){return this._sendMessage({action:"ledger-sign-transaction",params:{tx:e,hdPath:t}})},e.signPersonalMessage=function(){var t=l(m.mark((function t(e,r){return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._sendMessage({action:"ledger-sign-personal-message",params:{hdPath:e,message:r}}));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e._setupIframe=function(){this.iframe=document.createElement("iframe"),this.iframe.src=this.bridgeUrl,document.head.appendChild(this.iframe)},e._getOrigin=function(){return this.bridgeUrl.split("/").slice(0,3).join("/")},e._sendMessage=function(t){var e,r=this;return null==(e=this.iframe.contentWindow)||e.postMessage(g({},t,{target:"LEDGER-IFRAME"}),"*"),new Promise((function(e,n){window.addEventListener("message",(function i(a){var s=a.data;if(a.origin===r._getOrigin())return s&&s.action&&s.action===t.action+"-reply"?s.success?void e(s.payload):n(s.payload.error):void window.removeEventListener("message",i);n("OriginError")}))}))},t}(),b=function(){function t(){this.baseHdPath="m/44'/60'/0'",this.page=0,this.perPage=5,this.hdk=new s,this.bridge=w?new y:new x}var e=t.prototype;return e.isUnlocked=function(){return Boolean(this.hdk&&this.hdk.publicKey)},e.setBaseHdPath=function(t){this.baseHdPath!==t&&(this.hdk=new s),this.baseHdPath=t},e.unlock=function(t){var e=this;if(this.isUnlocked()&&!t)return Promise.resolve("already unlocked");var r=t?this._toLedgerPath(t):this.baseHdPath;return this.bridge.unlock(r).then((function(t){return e.hdk.publicKey=i.from(t.publicKey,"hex"),e.hdk.chainCode=i.from(t.chainCode,"hex"),t.address}))},e.getFirstPage=function(t){return this.page=0,this.__getPage(t,1)},e.getNextPage=function(t){return this.__getPage(t,1)},e.getPreviousPage=function(t){return this.__getPage(t,-1)},e.signTransaction=function(t,e){var r=this;return this.unlock().then((function(n){var a=t.getMessageToSign(!1),s=i.isBuffer(a)?a.toString("hex"):o.rlp.encode(a).toString("hex");return r.bridge.signTransaction(e,s).then((function(e){var r=t.toJSON();return r.type=o.addHexPrefix(t.type.toString()),r.v=o.addHexPrefix(e.v),r.r=o.addHexPrefix(e.r),r.s=o.addHexPrefix(e.s),p.TransactionFactory.fromTxData(r,{common:t.common})}))}))},e.signMessage=function(){var t=l(m.mark((function t(e,r){var n=this;return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.unlock(r).then(function(){var t=l(m.mark((function t(a){var s,c,h,p,f;return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=o.isHexString(e)?e:i.from(e).toString("hex"),t.next=3,n.bridge.signPersonalMessage(r,e?o.stripHexPrefix(s):"");case 3:return(h=((c=t.sent).v-27).toString(16)).length<2&&(h="0"+h),f=u.recoverPersonalSignature({data:e,sig:p="0x"+c.r+c.s+h}),o.toChecksumAddress(f),o.toChecksumAddress(a),t.abrupt("return",p);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getPublicKey=function(){var t=l(m.mark((function t(e){return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.bridge.unlock(e);case 2:return t.next=4,t.sent.publicKey;case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e._getPathForIndex=function(t){return this._isLedgerLiveHdPath()?"m/44'/60'/"+t+"'/0/0":this.baseHdPath+"/"+t},e.__getPage=function(){var t=l(m.mark((function t(e,r){var n,i,a;return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.page+=r,this.page<=0&&(this.page=1),i=(n=(this.page-1)*this.perPage)+this.perPage,this.setBaseHdPath(e),t.next=7,this.unlock();case 7:if(!this._isLedgerLiveHdPath()){t.next=13;break}return t.next=10,this._getAccountsBIP44(n,i);case 10:a=t.sent,t.next=14;break;case 13:a=this._getAccountsLegacy(n,i);case 14:return t.abrupt("return",a);case 15:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e._getAccountsBIP44=function(){var t=l(m.mark((function t(e,r){var n,i,a;return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],i=e;case 2:if(!(i<r)){t.next=11;break}return a=this._getPathForIndex(i),t.next=6,this.unlock(a);case 6:n.push({address:t.sent,balance:0,index:i,hdPath:a});case 8:i++,t.next=2;break;case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e._getAccountsLegacy=function(){var t=l(m.mark((function t(e,r){var n,i,a,s;return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],i=e;i<r;i++)a=this._getPathForIndex(i),s=this._addressFromIndex(i),n.push({address:s,balance:0,index:i,hdPath:a});return t.abrupt("return",n);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e._addressFromIndex=function(t){var e=this.hdk.derive("m/"+t),r=o.publicToAddress(e.publicKey,!0).toString("hex");return o.toChecksumAddress("0x"+r)},e._isLedgerLiveHdPath=function(){return"m/44'/60'/0'/0/0"===this.baseHdPath},e._toLedgerPath=function(t){return t.toString().replace("m/","")},t}(),P=function(){function t(){this.app={},this.transport={}}var e=t.prototype;return e.makeApp=function(){var t=l(m.mark((function t(){var e;return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.create(3e4);case 3:this.transport=e=t.sent,this.app=new f.ledger.app(e,45e3,5e3),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(0),n.error("LEDGER:::CREATE APP ERROR",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),e.cleanUp=function(){var t=l(m.mark((function t(){var e;return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.app={},t.prev=1,t.t0=null==(e=this.transport)?void 0:e.close,!t.t0){t.next=6;break}return t.next=6,this.transport.close();case 6:t.next=11;break;case 8:t.prev=8,t.t1=t.catch(1),n.warn(t.t1);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),e.unlock=function(){var t=l(m.mark((function t(e,r){return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.makeApp();case 3:return t.next=5,this.getAddressByHdPath(e,r);case 5:return t.t0=t.sent,t.next=8,this.getPublicKey(e);case 8:return t.t1=t.sent,t.abrupt("return",{address:t.t0,publicKey:t.t1});case 12:throw t.prev=12,t.t2=t.catch(0),new Error(this.ledgerErrToMessage(t.t2));case 15:return t.prev=15,t.next=18,this.cleanUp();case 18:return t.finish(15);case 19:case"end":return t.stop()}}),t,this,[[0,12,15,19]])})));return function(e,r){return t.apply(this,arguments)}}(),e.signTransaction=function(){var t=l(m.mark((function t(e,r,n){var a,s;return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n="bnb"),t.prev=1,t.next=4,this.makeApp();case 4:return t.next=6,this.mustHaveApp().showAddress(n,e);case 6:return t.next=8,this.mustHaveApp().sign(i.from(r,"hex"),e);case 8:return t.t0=null==(s=t.sent)||null==(a=s.signature)?void 0:a.toString("hex"),t.next=12,this.getPublicKey(e);case 12:return t.t1=t.sent,t.abrupt("return",{signature:t.t0,pubKey:t.t1});case 16:throw t.prev=16,t.t2=t.catch(1),new Error(this.ledgerErrToMessage(t.t2));case 19:return t.prev=19,t.next=22,this.cleanUp();case 22:return t.finish(19);case 23:case"end":return t.stop()}}),t,this,[[1,16,19,23]])})));return function(e,r,n){return t.apply(this,arguments)}}(),e.mustHaveApp=function(){if(void 0===this.app.getVersion)throw new Error("LedgerClient: Call makeApp() first");return this.app},e.getPublicKey=function(){var t=l(m.mark((function t(e){var r;return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.mustHaveApp().getPublicKey(e);case 2:return r=f.crypto.getPublicKey(t.sent.pk.toString("hex")),t.abrupt("return",r.encode("hex",!0));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getAddressByHdPath=function(){var t=l(m.mark((function t(e,r){return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=f.crypto,t.next=3,this.getPublicKey(e);case 3:return t.t1=t.sent,t.t2=r,t.abrupt("return",t.t0.getAddressFromPublicKey.call(t.t0,t.t1,t.t2));case 6:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.ledgerErrToMessage=function(t){var e,r;return e=t,"TransportWebUSBGestureRequired"===(r=String(e.name||e))||"TransportOpenUserCancelled"===r?"LEDGER_NEED_USB_PERMISSION":function(t){var e=String(t.message||t);return e.includes("0x6700")||e.includes("0x6e00")}(t)?"LEDGER_WRONG_APP":function(t){var e=String(t.message||t);return e.includes("OpenFailed")||e.includes("0x6804")}(t)||function(t){return"string"==typeof t}(t)&&t.includes("6801")?"LEDGER_LOCKED":function(t){return t.hasOwnProperty("id")&&t.hasOwnProperty("message")}(t)&&t.message.includes("U2F not supported")?"U2F_NOT_SUPPORTED":t.toString()},t}(),k=function(){function t(){this.bridgeUrl="https://binance-chain-npm.github.io/ledger-bridge/bbc/",this.iframe=null,this._setupIframe()}var e=t.prototype;return e.unlock=function(){var t=l(m.mark((function t(e,r){return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._sendMessage({action:"ledger-unlock",params:{hdPath:e.toString(),hrp:r}}));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.signTransaction=function(t,e,r){return void 0===r&&(r="bnb"),this._sendMessage({action:"ledger-sign-transaction",params:{tx:e,hdPath:t.toString(),hrp:r}})},e._setupIframe=function(){this.iframe=document.createElement("iframe"),this.iframe.src=this.bridgeUrl,document.head.appendChild(this.iframe)},e._getOrigin=function(){return this.bridgeUrl.split("/").slice(0,3).join("/")},e._sendMessage=function(t){var e,r=this;return null==(e=this.iframe.contentWindow)||e.postMessage(g({},t,{target:"BC-LEDGER-IFRAME"}),"*"),new Promise((function(e,n){window.addEventListener("message",(function i(a){var s=a.data;if(a.origin===r._getOrigin())return s&&s.action&&s.action===t.action+"-reply"?s.success?void e(s.payload):n(s.payload.error):void window.removeEventListener("message",i);n("OriginError")}))}))},t}();e.BBCLedgerBridge=function(){function t(){this.page=0,this.perPage=5,this.hrp="bnb",this.bridge=w?new P:new k}var e=t.prototype;return e.setHrp=function(t){this.hrp=t},e.unlock=function(){var t=l(m.mark((function t(e){return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.bridge.unlock(this._toPathArray(e),this.hrp);case 2:return t.next=4,t.sent.address;case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.signTransaction=function(t,e){var r=t.getSignBytes();return this.bridge.signTransaction(this._toPathArray(e),r.toString("hex"),this.hrp).then((function(e){var r=f.crypto.getPublicKey(e.pubKey);return t.addSignature(r,i.from(e.signature,"hex")),t})).catch((function(t){return Promise.reject(new Error(t.message||"Ledger: Unknown error while signing transaction"))}))},e.signMessage=function(){var t=l(m.mark((function t(e,r){return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw n.warn(r,e),new Error("signMessage: Not support");case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.getPublicKey=function(){var t=l(m.mark((function t(e){return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.bridge.unlock(this._toPathArray(e),this.hrp);case 2:return t.next=4,t.sent.publicKey;case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getFirstPage=function(t){return this.page=0,this.__getPage(t,1)},e.getNextPage=function(t){return this.__getPage(t,1)},e.getPreviousPage=function(t){return this.__getPage(t,-1)},e._toPathArray=function(t){return t.split("/").map((function(t){return Number(t)}))},e.__getPage=function(){var t=l(m.mark((function t(e,r){var n,i,a,s;return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.page+=r,this.page<=0&&(this.page=1),n=(this.page-1)*this.perPage,i=this._toPathArray(e),a=[],s=0;case 6:if(!(s<this.perPage)){t.next=15;break}return i.splice(i.length-1,1,n+s),t.next=10,this.bridge.unlock(i,this.hrp);case 10:a.push({address:t.sent.address,hdPath:i.join("/"),balance:0,index:n+s});case 12:s++,t.next=6;break;case 15:return t.abrupt("return",a);case 16:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),t}(),e.BSCLedgerBridge=b},41705:function(t){function e(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=function(){return[]},e.resolve=e,e.id=41705,t.exports=e},46601:function(){},89214:function(){},71922:function(){},2363:function(){},96419:function(){},56353:function(){},69386:function(){},31616:function(){},52361:function(){},94616:function(){},56282:function(){},3535:function(){},45545:function(){},46047:function(){},84918:function(){},50695:function(){},84215:function(){},47021:function(){},81869:function(){},40280:function(){},24318:function(){},3967:function(){},55225:function(){},85652:function(){},74130:function(){},50471:function(){},71632:function(){},73983:function(){}}]);
//# sourceMappingURL=681.fea14e77.js.map